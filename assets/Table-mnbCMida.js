import{_ as D}from"./BaseTable.vue_vue_type_script_setup_true_lang-d6DGNi0s.js";import{_ as T}from"./BaseTableHandle.vue_vue_type_script_setup_true_lang-mb_QTy4b.js";import{_ as E}from"./BaseTableSearch.vue_vue_type_script_setup_true_lang-INakirT6.js";import{X as R,S as $,P as B,O as A}from"./index-Cz8vzEW4.js";import{a3 as m,E as F,aS as I,F as M,ad as N,M as k,H as b,ab as v,N as u,aM as f,aG as S,ag as x}from"./vendor_1706073395038-y6ZWoyLF.js";const U=async d=>{const{page:i,size:s}=d;return R({url:"/feature/table",method:"post",data:{page:i,size:s},headers:{Authorization:sessionStorage.getItem($)}})},j=()=>{const{isLoading:d,withLoading:i}=B(),s=m(),o=m({page:1,pageSize:20,pageSizes:[5,10,15,20,30],pageCount:10,showSizePicker:!0,showQuickJumper:!0});return{isLoading:d,pagination:o,tableData:s,getTableData:async r=>{let e={list:[],total:0};const l=await i(async()=>{const{data:n}=await r();return s.value=n.list,n});return l&&(e=l),e},exportExcel:(r,e,l,n)=>{let t;n?t=XLSX.utils.json_to_sheet(n):t=XLSX.utils.json_to_sheet(s.value??[]);const c=XLSX.utils.book_new();l&&XLSX.utils.sheet_add_aoa(t,[l],{origin:"A1"}),XLSX.utils.book_append_sheet(c,t,r??"Sheet1"),XLSX.writeFile(c,`${e}.xlsx`,{compression:!0})}}},K={class:"border border-vBorderLight dark:border-vBorderDark rounded p-4 mb-2"},P={class:"mb-2 flex items-center justify-end space-x-1"},J=F({__name:"Table",setup(d){const{success:i,error:s,info:o}=A(),p=m(""),{isLoading:_,tableData:r,pagination:e,getTableData:l}=j(),n=[{type:"selection"},{title:"序号",key:"id"},{title:"名称",key:"name"},{title:"性别",key:"sex"},{title:"出生日期",key:"birthday",align:"center"},{title:"家庭住址",key:"address",align:"center"},{title:"邮政编码",key:"postalCode",align:"center"},{title:"操作",key:"action",align:"center",render(a){return[S(x,{type:"primary",tertiary:!0,size:"small",style:{marginRight:"8px"},onClick:()=>{i(`点击更新： ${a.name}`)}},{default:()=>"更新"}),S(x,{type:"error",tertiary:!0,size:"small",onClick:()=>{s(`点击删除： ${a.name}`)}},{default:()=>"删除"})]}}],t=async()=>l(()=>U({page:e.value.page??1,size:e.value.pageSize??15}));e.value.onChange=async a=>{e.value.page=a,await t()},e.value.onUpdatePageSize=async a=>{e.value.pageSize=a,await t()};const c=()=>o("点击新增"),w=a=>i(`选中行所绑定的ID值: ${a}`),y=m([{label:"序号",key:"id",type:"input",placeholder:"请输入序号",value:""},{label:"名称",key:"name",type:"input",placeholder:"请输入名称",value:""},{label:"性别",key:"sex",type:"select",placeholder:"请选择性别",value:void 0,options:[{label:"男",value:1},{label:"女",value:2}]},{label:"出生日期",key:"birthday",type:"date",placeholder:"请输入出生日期",value:void 0},{label:"家庭住址",key:"address",type:"input",placeholder:"请输入家庭住址",value:""},{label:"邮政编码",key:"postalCode",type:"input",placeholder:"请输入邮政编码",value:""}]),L=()=>o("点击搜索"),X=()=>o("点击重置"),z=()=>o("点击导出"),C=()=>o("点击导入");return I(async()=>{const{total:a}=await t();e.value.pageCount=a}),(a,g)=>(M(),N("div",null,[k(D,{size:"small",loading:u(_),headers:n,data:u(r)||[],pagination:u(e),onCheckedRowKeys:w,onAddData:c},{search:b(()=>[v("div",K,[k(E,{"search-form-list":u(y),"onUpdate:searchFormList":g[0]||(g[0]=h=>f(y)?y.value=h:null),class:"grid grid-cols-4 gap-x-4",onSearch:L,onReset:X},null,8,["search-form-list"])])]),handle:b(()=>[v("div",P,[k(T,{value:u(p),"onUpdate:value":g[1]||(g[1]=h=>f(p)?p.value=h:null),onAdd:c,onExport:z,onInto:C},null,8,["value"])])]),_:1},8,["loading","data","pagination"])]))}});export{J as default};
