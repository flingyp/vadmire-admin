import{E as I,as as ne,af as g,I as m,a4 as $,bg as he,$ as C,a0 as w,a5 as K,ao as le,ak as se,G as de,a3 as it,am as ie,J as L,ag as Q,ah as Ee,aa as H,bh as ot,K as ze,aq as oe,W as te,aK as at,bc as rt,bi as Ne,H as Re,L as ae,a7 as lt}from"./vendor-13822149.js";var He=Symbol(),We=Symbol(),Xe=Symbol();function st(e){var t=g([]),n=function(a,l){return l?Array.prototype.indexOf.call(a,l):-1},i=function(a){var l,s,h=(s=(l=a[0].originRef)===null||l===void 0?void 0:l.parentNode)===null||s===void 0?void 0:s.children;h&&h.length&&a.sort(function(u,d){return n(h,u.originRef)-n(h,d.originRef)})},o=function(a){var l=t.value.findIndex(function(s){var h=s.key;return a.key===h});l>-1?t.value.splice(l,1,a):(t.value.push(a),i(t.value))},r=function(a){var l=t.value.filter(function(h){return h.key!==a}),s=l.length-1;t.value=l,e.value=Math.max(Math.min(e.value,s),0)};return{items:t,updateItem:o,removeItem:r}}function ht(e,t,n){var i=g(!1),o=function(){i.value=!1,n()},r=function(a){var l=e.value.findIndex(function(s){return s.key===a});l>-1&&(t.value=l,i.value=!0,n())};return{visible:i,handleHide:o,handleShow:r}}function dt(e){var t=g(0),n=function(i){t.value=i,e()};return{index:t,updateIndex:n}}var ue=I({});const ut={class:"PhotoView__Spinner"},ct=w("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},[w("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),w("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})],-1),vt=[ct];function ft(e,t,n,i,o,r){return m(),$("div",ut,vt)}ue.render=ft;ue.__file="src/PhotoView/Spinner.vue";function pt(e,t,n){var i,o=window.innerWidth,r=window.innerHeight,a=n%180!==0;a&&(i=[r,o],o=i[0],r=i[1]);var l,s,h=o/e,u=r/t;return e<o&&t<r?(l=e,s=t):h<u?(l=o,s=o*(t/e)):(l=r*(e/t),s=r),{width:l,height:s}}function gt(e){var t=g(0),n=g(0),i=g(0),o=g(0),r=g(!1);function a(s,h,u){var d=pt(s,h,u);i.value=d.width,o.value=d.height}var l=function(s){r.value=!1;var h=new Image;h.onload=function(){t.value=h.naturalWidth,n.value=h.naturalHeight,a(t.value,n.value,0),r.value=!0},h.src=s};return l(e.value),te(e,function(){l(e.value)}),{width:i,height:o,loaded:r,naturalWidth:t,naturalHeight:n,setSuitableImageSize:a}}function ee(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var mt=typeof global=="object"&&global&&global.Object===Object&&global,wt=mt,yt=typeof self=="object"&&self&&self.Object===Object&&self,St=wt||yt||Function("return this")(),Ye=St,$t=function(){return Ye.Date.now()},re=$t,bt=/\s/;function Tt(e){for(var t=e.length;t--&&bt.test(e.charAt(t)););return t}var kt=/^\s+/;function _t(e){return e&&e.slice(0,Tt(e)+1).replace(kt,"")}var Mt=Ye.Symbol,D=Mt,je=Object.prototype,It=je.hasOwnProperty,Rt=je.toString,U=D?D.toStringTag:void 0;function xt(e){var t=It.call(e,U),n=e[U];try{e[U]=void 0;var i=!0}catch{}var o=Rt.call(e);return i&&(t?e[U]=n:delete e[U]),o}var Pt=Object.prototype,Ct=Pt.toString;function Lt(e){return Ct.call(e)}var Ot="[object Null]",At="[object Undefined]",xe=D?D.toStringTag:void 0;function Bt(e){return e==null?e===void 0?At:Ot:xe&&xe in Object(e)?xt(e):Lt(e)}function Ft(e){return e!=null&&typeof e=="object"}var Vt="[object Symbol]";function De(e){return typeof e=="symbol"||Ft(e)&&Bt(e)==Vt}var Pe=0/0,Et=/^[-+]0x[0-9a-f]+$/i,zt=/^0b[01]+$/i,Nt=/^0o[0-7]+$/i,Ht=parseInt;function Ce(e){if(typeof e=="number")return e;if(De(e))return Pe;if(ee(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ee(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=_t(e);var n=zt.test(e);return n||Nt.test(e)?Ht(e.slice(2),n?2:8):Et.test(e)?Pe:+e}var Wt="Expected a function",Xt=Math.max,Yt=Math.min;function qe(e,t,n){var i,o,r,a,l,s,h=0,u=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(Wt);t=Ce(t)||0,ee(n)&&(u=!!n.leading,d="maxWait"in n,r=d?Xt(Ce(n.maxWait)||0,t):r,f="trailing"in n?!!n.trailing:f);function y(S){var R=i,A=o;return i=o=void 0,h=S,a=e.apply(A,R),a}function _(S){return h=S,l=setTimeout(k,t),u?y(S):a}function p(S){var R=S-s,A=S-h,X=t-R;return d?Yt(X,r-A):X}function T(S){var R=S-s,A=S-h;return s===void 0||R>=t||R<0||d&&A>=r}function k(){var S=re();if(T(S))return O(S);l=setTimeout(k,p(S))}function O(S){return l=void 0,f&&i?y(S):(i=o=void 0,a)}function z(){l!==void 0&&clearTimeout(l),h=0,i=s=o=l=void 0}function W(){return l===void 0?a:O(re())}function P(){var S=re(),R=T(S);if(i=arguments,o=this,s=S,R){if(l===void 0)return _(s);if(d)return clearTimeout(l),l=setTimeout(k,t),y(s)}return l===void 0&&(l=setTimeout(k,t)),a}return P.cancel=z,P.flush=W,P}var jt="Expected a function";function ce(e,t,n){var i=!0,o=!0;if(typeof e!="function")throw new TypeError(jt);return ee(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),qe(e,t,{leading:i,maxWait:t,trailing:o})}function Dt(e,t,n,i){var o=ce(function(){i(e.value,t.value,n.value)},8);window.addEventListener("resize",o),Ne(function(){window.removeEventListener("resize",o)})}var E;(function(e){e[e.None=0]="None",e[e.In=1]="In",e[e.Out=2]="Out"})(E||(E={}));var b;(function(e){e[e.Normal=0]="Normal",e[e.X=1]="X",e[e.Y=2]="Y",e[e.Scale=3]="Scale"})(b||(b={}));var x;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Top=2]="Top",e[e.Bottom=3]="Bottom"})(x||(x={}));function qt(e){if(e){var t=window.innerWidth,n=window.innerHeight,i=e.left+e.width/2-t/2,o=e.top+e.height/2-n/2;return"".concat(i,"px ").concat(o,"px")}return null}var Y=typeof document<"u"&&"ontouchstart"in document.documentElement,Ut=20,Le=10,J=40,Oe=6;function Kt(e,t){var n=0,i=qe(function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];n=0,e.apply(void 0,o)},300);return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];n+=1,i.apply(void 0,r),n>=2&&(i.cancel(),n=0,t.apply(void 0,r))}}function Ae(e){var t=e.x,n=e.y,i=e.clientX,o=e.clientY,r=e.fromScale,a=e.toScale,l=window.innerWidth,s=window.innerHeight,h=l/2+t,u=s/2+n,d=a/r,f=-(i-h)*(d-1),y=-(o-u)*(d-1);return{x:f+t,y:y+n,scale:a}}function Ue(e){var t,n=e.width,i=e.height,o=e.scale,r=e.rotate,a=r%180!==0;a&&(t=[i,n],n=t[0],i=t[1]);var l=window.innerWidth,s=window.innerHeight,h=n*o,u=i*o,d,f,y,_;return h>l?(d=(h-l)/2,f=-(h-l)/2):(d=0,f=0),u>s?(y=(u-s)/2,_=-(u-s)/2):(y=0,_=0),{edgeLeft:d,edgeRight:f,edgeTop:y,edgeBottom:_}}function Gt(e){var t=e.width,n=e.height,i=e.scale,o=e.rotate,r=e.x,a=e.y,l=Ue({width:t,height:n,scale:i,rotate:o}),s=[];return r===l.edgeLeft&&s.push(x.Left),r===l.edgeRight&&s.push(x.Right),a===l.edgeTop&&s.push(x.Top),a===l.edgeBottom&&s.push(x.Bottom),s}function Zt(e){var t=e.width,n=e.height,i=e.scale,o=e.rotate,r=e.x,a=e.y,l=Ue({width:t,height:n,scale:i,rotate:o}),s=l.edgeLeft,h=l.edgeRight,u=l.edgeTop,d=l.edgeBottom;return r>s&&(r=s),r<h&&(r=h),a>u&&(a=u),a<d&&(a=d),{x:r,y:a,scale:i}}function Be(e){var t=e.touches[0],n=t.clientX,i=t.clientY;if(e.touches.length>=2){var o=e.touches[1],r=o.clientX,a=o.clientY;return{clientX:(n+r)/2,clientY:(i+a)/2,touchLength:Math.sqrt(Math.pow(r-n,2)+Math.pow(a-i,2))}}return{clientX:n,clientY:i,touchLength:0}}function Jt(e,t,n,i,o,r,a,l,s){var h=g(0),u=g(0),d=g(1),f=g(0),y=g(!1),_=g(0),p=g(0),T=g(b.Normal),k=g(0),O=g(0),z=g(0),W=g(1),P=[],S=function(c){Y||(A(c.clientX,c.clientY,0),window.addEventListener("mousemove",X),window.addEventListener("mouseup",N))},R=function(c){if(Y){var v=Be(c);A(v.clientX,v.clientY,v.touchLength),window.addEventListener("touchmove",B),window.addEventListener("touchend",j)}},A=function(c,v,M){y.value=!0,_.value=c,p.value=v,z.value=M,W.value=d.value,P=Gt({width:e.value,height:t.value,scale:d.value,rotate:f.value,x:k.value,y:O.value}),r(c,v)},X=function(c){Y||!y.value||F(c.clientX,c.clientY,0)},B=function(c){if(!(!Y||!y.value)){var v=Be(c);F(v.clientX,v.clientY,v.touchLength)}},F=ce(function(c,v,M){if(T.value===b.Normal)if(d.value!==1||M)T.value=b.Scale;else{var V=Math.abs(c-_.value)>Le,et=Math.abs(v-p.value)>Le;if(!V&&!et)return;T.value=V?b.X:b.Y}a(T.value,c,v,W.value,P);var Z=c-_.value,Ie=v-p.value;if(T.value===b.Y&&(h.value=Z+k.value,u.value=Ie+O.value),T.value===b.Scale)if(M){var tt=d.value+(M-z.value)/100/2*d.value,nt=Math.max(Math.min(tt,Math.max(Oe,n.value/e.value)),1);Me(nt,c,v),z.value=M}else!(Z>0&&P.includes(x.Left))&&!(Z<0&&P.includes(x.Right))&&(h.value=Z+k.value),u.value=Ie+O.value},8,{trailing:!1}),N=function(c){Y||(_e(c.clientX,c.clientY,c),window.removeEventListener("mousemove",X),window.removeEventListener("mouseup",N))},j=function(c){if(Y){var v=c.changedTouches[0];_e(v.clientX,v.clientY,c),window.removeEventListener("touchmove",B),window.removeEventListener("touchend",j)}},q=function(c,v){if(T.value===b.Normal)if(d.value===1){var M=Math.max(2,n.value/e.value),V=Ae({x:h.value,y:u.value,clientX:c,clientY:v,fromScale:d.value,toScale:M});h.value=V.x,u.value=V.y,d.value=V.scale}else h.value=0,u.value=0,d.value=1},Ge=Kt(s,q),_e=function(c,v,M){_.value===c&&p.value===v&&Ge(c,v,M),l(T.value,c,v,W.value,P),T.value===b.Y&&(h.value=0,u.value=0),T.value===b.Scale&&G({width:e.value,height:t.value,scale:d.value,rotate:f.value,x:h.value,y:u.value}),y.value=!1,T.value=b.Normal,_.value=0,p.value=0,k.value=h.value,O.value=u.value},Ze=function(c){var v=d.value-c.deltaY/100/2,M=Math.max(Math.min(v,Math.max(Oe,n.value/e.value)),1);Me(M,c.clientX,c.clientY)},Me=function(c,v,M){var V=Ae({x:h.value,y:u.value,clientX:v,clientY:M,fromScale:d.value,toScale:c});G({width:e.value,height:t.value,scale:V.scale,rotate:f.value,x:V.x,y:V.y})},G=function(c){var v=Zt(c);h.value=v.x,u.value=v.y,k.value=v.x,O.value=v.y,d.value=v.scale},Je=function(){f.value=f.value-90,o(n.value,i.value,f.value),G({width:e.value,height:t.value,scale:d.value,rotate:f.value,x:h.value,y:u.value})},Qe=function(){f.value=f.value+90,o(n.value,i.value,f.value),G({width:e.value,height:t.value,scale:d.value,rotate:f.value,x:h.value,y:u.value})};return{x:h,y:u,scale:d,touched:y,handleMouseDown:S,handleTouchStart:R,handleWheel:Ze,rotate:f,handleRotateLeft:Je,handleRotateRight:Qe}}var ve=I({name:"PhotoView",components:{Spinner:ue},props:{src:{type:String,required:!0},originRect:{type:Object,default:null},showAnimateType:{type:Number,default:null}},emits:["touchStart","touchMove","touchEnd","singleTap"],setup:function(e,t){var n=t.emit,i=he(e).src,o=gt(i),r=o.width,a=o.height,l=o.loaded,s=o.naturalWidth,h=o.naturalHeight,u=o.setSuitableImageSize,d=function(B,F){n("touchStart",B,F)},f=function(B,F,N,j,q){n("touchMove",B,F,N,j,q)},y=function(B,F,N,j,q){n("touchEnd",B,F,N,j,q)},_=function(B,F,N){n("singleTap",B,F,N)},p=Jt(r,a,s,h,u,d,f,y,_),T=p.x,k=p.y,O=p.scale,z=p.rotate,W=p.touched,P=p.handleMouseDown,S=p.handleTouchStart,R=p.handleWheel,A=p.handleRotateLeft,X=p.handleRotateRight;return Dt(s,h,z,u),{width:r,height:a,loaded:l,x:T,y:k,scale:O,touched:W,handleMouseDown:P,handleTouchStart:S,handleWheel:R,rotate:z,handleRotateLeft:A,handleRotateRight:X}},data:function(){return{ShowAnimateEnum:E,isFlipHorizontal:!1,isFlipVertical:!1}},methods:{getAnimateOrigin:qt,toggleFlipHorizontal:function(){this.isFlipHorizontal=!this.isFlipHorizontal},toggleFlipVertical:function(){this.isFlipVertical=!this.isFlipVertical},getTransform:function(){var e="".concat(this.isFlipHorizontal?"-":"").concat(this.scale),t="".concat(this.isFlipVertical?"-":"").concat(this.scale),n={matrix:"".concat(e,", 0, 0, ").concat(t,", ").concat(this.x,", ").concat(this.y)};this.rotate&&(n.rotate="".concat(this.rotate,"deg"));var i="";return Object.keys(n).forEach(function(o){i+="".concat(o,"(").concat(n[o],")")}),i}}});const Qt=["src"];function en(e,t,n,i,o,r){const a=C("spinner");return e.loaded?(m(),$("div",{key:0,class:"PhotoView__PhotoWrap",style:K({width:`${e.width}px`,height:`${e.height}px`})},[w("div",{class:se(["PhotoView__PhotoBox",{PhotoView__animateIn:e.showAnimateType===e.ShowAnimateEnum.In,PhotoView__animateOut:e.showAnimateType===e.ShowAnimateEnum.Out}]),style:K({transformOrigin:e.getAnimateOrigin(e.originRect),width:e.showAnimateType===e.ShowAnimateEnum.In||e.showAnimateType===e.ShowAnimateEnum.Out?"0":"100%"})},[w("img",{class:"PhotoView__Photo",src:e.src,style:K({width:`${e.width}px`,height:`${e.height}px`,transform:e.getTransform(),transition:e.touched?void 0:"transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1)"}),onMousedown:t[0]||(t[0]=le((...l)=>e.handleMouseDown&&e.handleMouseDown(...l),["prevent"])),onTouchstart:t[1]||(t[1]=le((...l)=>e.handleTouchStart&&e.handleTouchStart(...l),["prevent"])),onWheel:t[2]||(t[2]=(...l)=>e.handleWheel&&e.handleWheel(...l))},null,44,Qt)],6)],4)):(m(),de(a,{key:1}))}ve.render=en;ve.__file="src/PhotoView/index.vue";function tn(e){var t=document.body.style,n=t.overflow;te(e,function(){e.value?t.overflow="hidden":t.overflow=n})}function nn(){var e=g(window.innerWidth),t=ce(function(){e.value=window.innerWidth},8);return window.addEventListener("resize",t),Ne(function(){window.removeEventListener("resize",t)}),{innerWidth:e}}var fe=I({});const on={version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"44",height:"44",viewBox:"0 0 768 768"},an=w("path",{fill:"#FFF",d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"},null,-1),rn=[an];function ln(e,t,n,i,o,r){return m(),$("svg",on,rn)}fe.render=ln;fe.__file="src/PhotoSlider/Close.vue";var pe=I({});const sn={version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"44",height:"44",viewBox:"0 0 768 768"},hn=w("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"},null,-1),dn=[hn];function un(e,t,n,i,o,r){return m(),$("svg",sn,dn)}pe.render=un;pe.__file="src/PhotoSlider/ArrowLeft.vue";var ge=I({});const cn={version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"44",height:"44",viewBox:"0 0 768 768"},vn=w("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"},null,-1),fn=[vn];function pn(e,t,n,i,o,r){return m(),$("svg",cn,fn)}ge.render=pn;ge.__file="src/PhotoSlider/ArrowRight.vue";var me=I({});const gn={viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"44",height:"44"},mn=w("path",{fill:"#FFF",d:"M744.81 959.5c99.37-180.1 116.14-454.76-274.34-445.6v221.85L134.82 400.12 470.46 64.5v217.1c467.59-12.2 519.68 412.74 274.35 677.9z"},null,-1),wn=[mn];function yn(e,t,n,i,o,r){return m(),$("svg",gn,wn)}me.render=yn;me.__file="src/PhotoSlider/RotateLeft.vue";var we=I({});const Sn={viewBox:"0 0 1000 1000",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"44",height:"44"},$n=w("path",{fill:"#FFF",d:"M555.668 258.9754V47.24496791175579l327.3385 327.3241L555.668 701.8941V485.52881146582615c-380.8294-8.9369-364.4728 258.9334-267.5596 434.5814C48.8389 661.5105 99.6385 247.0815 555.668 258.9754z"},null,-1),bn=[$n];function Tn(e,t,n,i,o,r){return m(),$("svg",Sn,bn)}we.render=Tn;we.__file="src/PhotoSlider/RotateRight.vue";var ye=I({});const kn={viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"44",height:"44"},_n=w("path",{fill:"#FFF",d:"M978.432 492.832l-153.696-116.896c-17.504-13.312-31.968-6.208-32.096 15.776L792.032 480H231.968l-0.608-88.288c-0.16-22.016-14.592-29.088-32.096-15.776l-153.696 116.896c-17.504 13.312-17.12 34.592 0.864 47.264l154.144 108.608c17.984 12.672 32.576 5.056 32.416-16.96L232.384 544h559.2l-0.576 87.712c-0.16 22.016 14.432 29.632 32.416 16.96l154.144-108.608c17.984-12.672 18.4-33.92 0.864-47.232z"},null,-1),Mn=[_n];function In(e,t,n,i,o,r){return m(),$("svg",kn,Mn)}ye.render=In;ye.__file="src/PhotoSlider/FlipHorizontal.vue";var Se=I({});const Rn={viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"44",height:"44"},xn=w("path",{fill:"#FFF",d:"M494.03 74.72l-109.59 144.09c-12.48 16.41-5.82 29.97 14.79000001 30.09L482 249.47 482 774.53l-82.77 0.54c-20.64 0.15-27.27 13.68-14.79 30.09l109.59 144.09c12.48 16.41 32.43 16.05 44.31000001-0.81l101.81999999-144.51c11.88-16.86 4.74-30.54-15.9-30.39L542.00000001 774.14l-1e-8-524.25 82.23 0.54c20.64 0.15 27.78-13.53 15.9-30.39l-101.82-144.51c-11.88-16.86-31.8-17.25-44.28-0.81z"},null,-1),Pn=[xn];function Cn(e,t,n,i,o,r){return m(),$("svg",Rn,Pn)}Se.render=Cn;Se.__file="src/PhotoSlider/FlipVertical.vue";var $e=I({});const Ln={viewBox:"0 0 1068 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2740",width:"44",height:"44"},On=w("path",{d:"M252.622237 809.004596a252.614304 252.614304 0 0 1-31.486765-503.2587v-4.352863a301.406611 301.406611 0 0 1 594.880633-68.660847 288.877568 288.877568 0 0 1-36.146765 575.488683 31.529129 31.529129 0 0 1 0-63.047667 225.819311 225.819311 0 0 0 8.472726-451.479758l-26.244267-0.974363-3.812726-25.990085a238.358944 238.358944 0 0 0-474.176071 34.664037 243.040125 243.040125 0 0 0 1.874591 30.035812l4.501135 35.786673-37.163491-0.3495h-0.730773c-104.521657 0-189.577228 85.034389-189.577228 189.577228s85.034389 189.577228 189.577228 189.577228a31.529129 31.529129 0 0 1 0 63.047667z",fill:"#FFF"},null,-1),An=w("path",{d:"M500.417679 442.421546m10.590906 0l46.599989 0q10.590907 0 10.590907 10.590906l0 528.878103q0 10.590907-10.590907 10.590907l-46.599989 0q-10.590907 0-10.590906-10.590907l0-528.878103q0-10.590907 10.590906-10.590906Z",fill:"#FFF"},null,-1),Bn=w("path",{d:"M487.406543 980.472843m7.488902-7.488902l171.982631-171.982631q7.488902-7.488902 14.977804 0l32.951168 32.951168q7.488902 7.488902 0 14.977804l-171.982631 171.982631q-7.488902 7.488902-14.977804 0l-32.951168-32.951168q-7.488902-7.488902 0-14.977804Z",fill:"#FFF"},null,-1),Fn=w("path",{d:"M344.966294 837.223674m7.488902-7.488902l32.951168-32.951168q7.488902-7.488902 14.977804 0l176.198883 176.198883q7.488902 7.488902 0 14.977804l-32.951168 32.951168q-7.488902 7.488902-14.977804 0l-176.198883-176.198883q-7.488902-7.488902 0-14.977804Z",fill:"#FFF"},null,-1),Vn=[On,An,Bn,Fn];function En(e,t,n,i,o,r){return m(),$("svg",Ln,Vn)}$e.render=En;$e.__file="src/PhotoSlider/Download.vue";function zn(e,t){var n=g(e.value),i=g(E.None),o=g(null);te(e,function(){var a=t.value.originRef;if(a&&a.nodeType===1&&a.children.length>0){var l=a.getBoundingClientRect(),s=l.top,h=l.left,u=l.width,d=l.height;o.value={left:h,top:s,width:u,height:d}}else o.value=null;e.value?(i.value=E.In,n.value=!0):i.value=E.Out});var r=function(){i.value===E.Out&&(n.value=!1),i.value=E.None};return{photoVisible:n,showAnimateType:i,originRect:o,onShowAnimateEnd:r}}var be=I({name:"PhotoSlider",components:{PhotoView:ve,Close:fe,ArrowLeft:pe,ArrowRight:ge,RotateLeft:me,RotateRight:we,FlipHorizontal:ye,FlipVertical:Se,Download:$e},props:{items:{type:Array,required:!0},index:{type:Number,required:!0},visible:{type:Boolean,required:!0},shouldTransition:{type:Boolean,default:!1},toggleOverlay:{type:Boolean,default:!0},defaultBackdropOpacity:{type:Number,default:1},loop:{type:Boolean,default:!1},downloadMethod:{type:Function,default:null}},emits:["clickPhoto","clickMask","changeIndex","closeModal"],setup:function(e){var t=he(e),n=t.items,i=t.index,o=t.visible,r=it(function(){return n.value[i.value]||{}});tn(o);var a=zn(o,r),l=a.photoVisible,s=a.showAnimateType,h=a.originRect,u=a.onShowAnimateEnd,d=nn().innerWidth;return{innerWidth:d,currentItem:r,photoVisible:l,showAnimateType:s,originRect:h,onShowAnimateEnd:u}},data:function(){return{horizontalOffset:Ut,ShowAnimateEnum:E,isTouchDevice:Y,touched:!1,hasMove:!1,needTransition:!1,clientX:0,clientY:0,touchMoveX:0,backdropOpacity:this.defaultBackdropOpacity,overlayVisible:!0,virtualIndex:0,photoViewRefs:{}}},computed:{showItems:function(){var e=this.items.length;if(this.loop){var t=this.items.concat(this.items).concat(this.items);return t.slice(e+this.index-1,e+this.index+2)}return this.items.slice(Math.max(this.index-1,0),Math.min(this.index+2,e))}},created:function(){window.addEventListener("keydown",this.handleKeyDown)},beforeUnmount:function(){window.removeEventListener("keydown",this.handleKeyDown)},beforeUpdate:function(){this.photoViewRefs={}},methods:{defaultDownloadMethod:function(e){var t=e.src.split("/"),n=t[t.length-1],i=new Image;i.setAttribute("crossOrigin","Anonymous"),i.onload=function(){var o=document.createElement("canvas"),r=o.getContext("2d");o.width=i.width,o.height=i.height,r==null||r.drawImage(i,0,0,i.width,i.height),o.toBlob(function(a){if(a){var l=URL.createObjectURL(a),s=document.createElement("a");s.download=e.downloadName||n,s.href=l,s.dispatchEvent(new MouseEvent("click")),URL.revokeObjectURL(l)}})},i.src=e.src+"?v="+Date.now()},handleDownload:function(){var e=this.items[this.index];typeof this.downloadMethod=="function"?this.downloadMethod(e):this.defaultDownloadMethod(e)},toggleFlipHorizontal:function(){var e;(e=this.photoViewRefs[this.currentItem.key])===null||e===void 0||e.toggleFlipHorizontal()},toggleFlipVertical:function(){var e;(e=this.photoViewRefs[this.currentItem.key])===null||e===void 0||e.toggleFlipVertical()},handleRotateLeft:function(){var e;(e=this.photoViewRefs[this.currentItem.key])===null||e===void 0||e.handleRotateLeft()},handleRotateRight:function(){var e;(e=this.photoViewRefs[this.currentItem.key])===null||e===void 0||e.handleRotateRight()},setPhotoViewRef:function(e,t){this.photoViewRefs[e]=t},handleKeyDown:function(e){if(this.visible)switch(e.code){case"ArrowLeft":this.handlePrevious();break;case"ArrowRight":this.handleNext();break;case"Escape":this.handleClickClose();break}},handleSingleTap:function(e,t,n){this.toggleOverlay&&(this.overlayVisible=!this.overlayVisible),this.$emit("clickPhoto",n)},handleTouchStart:function(e,t){this.touched=!0,this.needTransition=!1,this.clientX=e,this.clientY=t},handleTouchMove:function(e,t,n,i,o){e===b.Scale&&i!==1&&this.handleTouchScaleMove(t,o),e===b.X&&this.handleTouchHorizontalMove(t),e===b.Y&&this.handleTouchVerticalMove(t,n)},handleTouchScaleMove:function(e,t){var n=e-this.clientX;(n>0&&t.includes(x.Left)||n<0&&t.includes(x.Right))&&this.handleTouchHorizontalMove(e)},handleTouchHorizontalMove:function(e){var t=e-this.clientX;!this.loop&&(this.index===0&&t>0||this.index===this.items.length-1&&t<0)&&(t=t/2),this.hasMove=e!==this.clientX,this.touchMoveX=t},handleTouchVerticalMove:function(e,t){var n=Math.abs(t-this.clientY),i=Math.max(Math.min(this.defaultBackdropOpacity,this.defaultBackdropOpacity-n/100/4),0);this.hasMove=e!==this.clientX||t!==this.clientY,this.backdropOpacity=i},handleTouchEnd:function(e,t,n,i,o){e===b.Scale&&i!==1&&this.handleTouchScaleEnd(t,o),e===b.X&&this.handleTouchHorizontalEnd(t),e===b.Y&&this.handleTouchVerticalEnd(n),this.hasMove&&(this.needTransition=!0),this.touched=!1,this.hasMove=!1,this.clientX=0,this.clientY=0,this.touchMoveX=0},handleTouchScaleEnd:function(e,t){var n=e-this.clientX;n<-J&&t.includes(x.Right)&&this.handleNext(),n>J&&t.includes(x.Left)&&this.handlePrevious()},handleTouchHorizontalEnd:function(e){var t=e-this.clientX;t<-J&&this.handleNext(),t>J&&this.handlePrevious()},handleTouchVerticalEnd:function(e){var t=e-this.clientY;Math.abs(t)>window.innerHeight*.14?this.$emit("closeModal"):this.resetBackdropOpacity()},resetBackdropOpacity:function(){this.backdropOpacity=this.defaultBackdropOpacity},resetNeedTransition:function(){this.needTransition=!1},handlePrevious:function(){var e=this.items.length;!this.loop&&this.index===0||(this.$emit("changeIndex",(this.index+e-1)%e),this.virtualIndex-=1)},handleNext:function(){var e=this.items.length;!this.loop&&this.index===e-1||(this.$emit("changeIndex",(this.index+1)%e),this.virtualIndex+=1)},handleClickMask:function(e){this.$emit("clickMask",e)},handleClickClose:function(){this.$emit("closeModal")},getItemLeft:function(e){var t=this.virtualIndex+e;return(this.loop||this.index!==0)&&(t-=1),"".concat((this.innerWidth+this.horizontalOffset)*t,"px")},getItemTransition:function(){var e="transform 0.6s cubic-bezier(0.25, 0.8, 0.25, 1)";if(this.needTransition)return e;if(!this.hasMove)return this.shouldTransition?e:void 0},getItemTransform:function(){return"translate3d(".concat(-(this.innerWidth+this.horizontalOffset)*this.virtualIndex+this.touchMoveX,"px, 0px, 0px)")}}});const Nn={class:"PhotoSlider__BannerWrap"},Hn={class:"PhotoSlider__Counter"},Wn={class:"PhotoSlider__BannerRight"},Xn={key:1,class:"PhotoSlider__FooterWrap"};function Yn(e,t,n,i,o,r){const a=C("download"),l=C("rotate-left"),s=C("rotate-right"),h=C("flip-horizontal"),u=C("flip-vertical"),d=C("close"),f=C("photo-view"),y=C("arrow-left"),_=C("arrow-right");return m(),de(ot,{to:"body"},[e.photoVisible?(m(),$("div",{key:0,class:se(["PhotoSlider__Wrapper",{PhotoSlider__Clean:e.showAnimateType!==e.ShowAnimateEnum.None,PhotoSlider__Hide:!e.overlayVisible}])},[w("div",{class:se(["PhotoSlider__Backdrop",{PhotoSlider__fadeIn:e.showAnimateType===e.ShowAnimateEnum.In,PhotoSlider__fadeOut:e.showAnimateType===e.ShowAnimateEnum.Out}]),style:K({background:`rgba(0, 0, 0, ${e.backdropOpacity})`}),onAnimationend:t[0]||(t[0]=p=>(e.onShowAnimateEnd(),e.resetBackdropOpacity()))},null,38),w("div",Nn,[w("div",Hn,ie(e.index+1)+" / "+ie(e.items.length),1),w("div",Wn,[L(a,{class:"PhotoSlider__BannerIcon",onClick:e.handleDownload},null,8,["onClick"]),L(l,{class:"PhotoSlider__BannerIcon",onClick:e.handleRotateLeft},null,8,["onClick"]),L(s,{class:"PhotoSlider__BannerIcon",onClick:e.handleRotateRight},null,8,["onClick"]),L(h,{class:"PhotoSlider__BannerIcon",onClick:e.toggleFlipHorizontal},null,8,["onClick"]),L(u,{class:"PhotoSlider__BannerIcon",onClick:e.toggleFlipVertical},null,8,["onClick"]),L(d,{class:"PhotoSlider__BannerIcon",onClick:e.handleClickClose},null,8,["onClick"])])]),(m(!0),$(Q,null,Ee(e.showItems,(p,T)=>(m(),$("div",{key:p.key,class:"PhotoSlider__PhotoBox",style:K({left:e.getItemLeft(T),transition:e.getItemTransition(),transform:e.getItemTransform()}),onTransitionend:t[2]||(t[2]=(...k)=>e.resetNeedTransition&&e.resetNeedTransition(...k)),onClick:t[3]||(t[3]=(...k)=>e.handleClickMask&&e.handleClickMask(...k))},[L(f,{ref_for:!0,ref:k=>e.setPhotoViewRef(p.key,k),"origin-rect":e.originRect,"show-animate-type":e.showAnimateType,src:p.src,onClick:t[1]||(t[1]=le(()=>{},["stop"])),onTouchStart:e.handleTouchStart,onTouchMove:e.handleTouchMove,onTouchEnd:e.handleTouchEnd,onSingleTap:e.handleSingleTap},null,8,["origin-rect","show-animate-type","src","onTouchStart","onTouchMove","onTouchEnd","onSingleTap"])],36))),128)),e.isTouchDevice?H("v-if",!0):(m(),$(Q,{key:0},[e.loop||e.index>0?(m(),$("div",{key:0,class:"PhotoSlider__ArrowLeft",onClick:t[4]||(t[4]=(...p)=>e.handlePrevious&&e.handlePrevious(...p))},[L(y)])):H("v-if",!0),e.loop||e.index<e.items.length-1?(m(),$("div",{key:1,class:"PhotoSlider__ArrowRight",onClick:t[5]||(t[5]=(...p)=>e.handleNext&&e.handleNext(...p))},[L(_)])):H("v-if",!0)],64)),e.currentItem.intro?(m(),$("div",Xn,ie(e.currentItem.intro),1)):H("v-if",!0)],2)):H("v-if",!0)])}be.render=Yn;be.__file="src/PhotoSlider/index.vue";var Te=I({name:"PhotoProvider",components:{PhotoSlider:be},props:{photoClosable:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},shouldTransition:{type:Boolean,default:!1},defaultBackdropOpacity:{type:Number,default:1},loop:{type:Boolean,default:!1},downloadMethod:{type:Function,default:null}},emits:["indexChange","visibleChange"],setup:function(e,t){var n=t.emit,i=function(){n("indexChange",{index:a,items:h,visible:y})},o=function(){n("visibleChange",{index:a,items:h,visible:y})},r=dt(i),a=r.index,l=r.updateIndex,s=st(a),h=s.items,u=s.updateItem,d=s.removeItem,f=ht(h,a,o),y=f.visible,_=f.handleHide,p=f.handleShow;return ne(He,u),ne(We,d),ne(Xe,p),{items:h,updateItem:u,removeItem:d,visible:y,handleHide:_,handleShow:p,index:a,updateIndex:l}},methods:{handleClickPhoto:function(){this.photoClosable&&this.handleHide()},handleClickMask:function(){this.maskClosable&&this.handleHide()}}});function jn(e,t,n,i,o,r){const a=C("photo-slider");return m(),$(Q,null,[H(" @slot 默认插槽 "),ze(e.$slots,"default"),L(a,{visible:e.visible,index:e.index,"should-transition":e.shouldTransition,"toggle-overlay":!e.photoClosable,"default-backdrop-opacity":e.defaultBackdropOpacity,items:e.items,loop:e.loop,"download-method":e.downloadMethod,onClickPhoto:e.handleClickPhoto,onClickMask:e.handleClickMask,onChangeIndex:e.updateIndex,onCloseModal:e.handleHide},null,8,["visible","index","should-transition","toggle-overlay","default-backdrop-opacity","items","loop","download-method","onClickPhoto","onClickMask","onChangeIndex","onCloseModal"])],64)}Te.render=jn;Te.__file="src/PhotoProvider/index.vue";function Dn(e,t){for(var n=-1,i=e==null?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}var qn=Array.isArray,Un=qn,Kn=1/0,Fe=D?D.prototype:void 0,Ve=Fe?Fe.toString:void 0;function Ke(e){if(typeof e=="string")return e;if(Un(e))return Dn(e,Ke)+"";if(De(e))return Ve?Ve.call(e):"";var t=e+"";return t=="0"&&1/e==-Kn?"-0":t}function Gn(e){return e==null?"":Ke(e)}var Zn=0;function Jn(e){var t=++Zn;return Gn(e)+t}var ke=I({name:"PhotoConsumer",props:{src:{type:String,required:!0},intro:{type:String,default:null},downloadName:{type:String,default:null}},setup:function(e){var t=oe(He),n=oe(We),i=oe(Xe),o=g(null),r=Jn(),a=he(e),l=a.src,s=a.intro,h=a.downloadName,u=function(){i==null||i(r)},d=function(){return{key:r,src:l.value,originRef:o.value,intro:s.value,downloadName:h.value}};return te([l,s,h],function(){t==null||t(d())}),at(function(){t==null||t(d())}),rt(function(){n==null||n(r)}),{root:o,handleClick:u}}});function Qn(e,t,n,i,o,r){return e.$slots.default()?(m(),$("span",{key:0,ref:"root",style:{display:"inline-block"},class:"PhotoConsumer",onClick:t[0]||(t[0]=(...a)=>e.handleClick&&e.handleClick(...a))},[H(" @slot 默认插槽 "),ze(e.$slots,"default")],512)):H("v-if",!0)}ke.render=Qn;ke.__file="src/PhotoConsumer/index.vue";const ei={class:"space-x-2"},ti=w("div",{class:"mb-2"},[lt(" 图片预览插件是: "),w("strong",null,[w("a",{href:"https://github.com/NameWjp/vue3-photo-preview",target:"_blank",class:"text-primary"},"vue3-photo-preview")])],-1),ni=["src"],oi=I({__name:"ImagePreview",setup(e){const t=g(["https://images5.alphacoders.com/131/thumbbig-1316260.webp","https://images6.alphacoders.com/131/1314156.jpg","https://images.alphacoders.com/131/1313793.jpg"]);return(n,i)=>(m(),$("div",ei,[ti,L(ae(Te),{"photo-closable":!1,"mask-closable":!0,"should-transition":!0},{default:Re(()=>[(m(!0),$(Q,null,Ee(ae(t),(o,r)=>(m(),de(ae(ke),{key:r,src:o,intro:o},{default:Re(()=>[w("img",{src:o,alt:"Preview Image",class:"w-40 h-40 object-cover cursor-pointer rounded"},null,8,ni)]),_:2},1032,["src","intro"]))),128))]),_:1})]))}});export{oi as default};
